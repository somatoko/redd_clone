<% content_for :community_label, "w/#{@submission.community.name}" %>

<%= render 'communities/header', community: @submission.community %>

<% content_for :primary_content do %>
	<div class="flex flex-row justify-between">
		<div class="-ml-5 flex flex-col items-center text-center w-1/12">
			<%= link_to "#", class: 'px-3' do %>
				<%= render_svg 'icons/up-vote', styles: 'fill-current text-gray-500 w-4 h-4' %>
			<% end %>
			<span class="text-gray-700 text-center block">123</span>
			<%= link_to "#", class: 'px-3' do %>
				<%= render_svg 'icons/down-vote', styles: 'fill-current text-gray-500 w-4 h-4' %>
			<% end %>
		</div>
		<div class="flex-1">
			<p class="mb-3 text-sm text-gray-600">Posted by <%= @submission.user.username %>
				<%= time_ago_in_words(@submission.created_at) + ' ago' %>
			</p>
			<h1 class="font-bold text-3xl mb-6"><%= @submission.title %></h1>
			<div class="prose prose-lg prose-indigo">
				<%= simple_format @submission.body %>
			</div>

			<%# Submission data %>
			<div class="flex items-center space-x-5 mt-6">
				<div class="flex items-center space-x-3 pr-2">
					<%= render_svg 'icons/conversation', styles: 'w-5 fill-current text-gray-500' %>
					<p>3 comments</p>
				</div>
				<% if author_of?(@submission) %>
					<%= link_to edit_submission_path(@submission), class: 'group' do %>
						<span class="sr-only">Edit this submission</span>
						<%= render_svg 'icons/edit', styles: 'w-5 fill-current text-gray-500 group-hover:text-indigo-600' %>
					<% end %>
					<%= button_to @submission, method: :delete, confirm: 'Are you sure?', class: 'block cursor-pointer group' do %>
						<span class="sr-only">Destroy this submission</span>
						<%= render_svg 'icons/delete', styles: 'w-5 fill-current text-gray-500 group-hover:text-indigo-600' %>
					<% end %>
				<% end %>
			</div>
		</div>
	</div>
<% end %>

<% content_for :secondary_content do %>
	<%= render 'communities/sidebar', community: @submission.community %>
	<%= link_to "Back to submissions", submissions_path %>
<% end %>

<%= render 'basic_layout' %>